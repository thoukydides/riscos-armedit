<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- File        : swi/tstrt.html -->
<!-- Date        : 28-May-01 -->
<!-- Author      : © Alexander Thoukydides, 2001 -->
<!-- Description : Part of the ARMEdit documentation. -->
<HTML>
<HEAD>
<TITLE>ARMEdit Documentation - SWI Calls [ARMEdit_TalkStart]</TITLE>
<LINK REV=MADE HREF="mailto:armedit@thouky.co.uk">
<LINK REL=PARENT HREF="index.html">
<META NAME=DESCRIPTION CONTENT="ARMEdit Documentation - SWI Calls [ARMEdit_TalkStart]">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#004499" ALINK="#FF0000">
<CENTER>
<H1><FONT COLOR="#004499"><B><I>ARMEdit</I></B></FONT>: SWI Calls</H1>
<B>ARMEdit_TalkStart</B> </CENTER>
<HR>
<TABLE WIDTH="100%"><TR><TD COLSPAN=4 ALIGN=RIGHT><FONT COLOR="#DD0000"><TT><B>ARMEdit_TalkStart</B></TT><BR><TT>(SWI&nbsp;&amp;4BC41)</TT></FONT></TD></TR><TR VALIGN=TOP><TD></TD><TD COLSPAN=3>Register a new client task</TD></TR>
<TR VALIGN=TOP><TD COLSPAN=4><BR></TD></TR><TR VALIGN=TOP><TD NOWRAP><FONT COLOR="#DD0000"><B>On&nbsp;entry:</B></FONT></TD><TD>R0&nbsp;=</TD><TD COLSPAN=2>pre-allocated ID for this task</TD></TR>
<TR VALIGN=TOP><TD></TD><TD>R1&nbsp;=</TD><TD COLSPAN=2>flags (see below)</TD></TR>
<TR VALIGN=TOP><TD></TD><TD>R2&nbsp;=</TD><TD COLSPAN=2>pointer to a function to be called when a message is available, or 0 for none</TD></TR>
<TR VALIGN=TOP><TD></TD><TD>R3&nbsp;=</TD><TD COLSPAN=2>value for R12 to contain when function pointed to by R2 is called</TD></TR>
<TR VALIGN=TOP><TD COLSPAN=4><BR></TD></TR><TR VALIGN=TOP><TD NOWRAP><FONT COLOR="#DD0000"><B>On&nbsp;exit:</B></FONT></TD><TD>R0&nbsp;=</TD><TD COLSPAN=2>a unique client handle</TD></TR>
<TR VALIGN=TOP><TD></TD><TD>R1&nbsp;=</TD><TD COLSPAN=2>pointer to a poll word for this task</TD></TR>
<TR VALIGN=TOP><TD COLSPAN=4><BR></TD></TR><TR VALIGN=TOP><TD NOWRAP><FONT COLOR="#DD0000"><B>Interrupts:</B></FONT></TD><TD COLSPAN=3>Interrupt status is undefined<BR>Fast interrupts are enabled</TD></TR>
<TR VALIGN=TOP><TD COLSPAN=4><BR></TD></TR><TR VALIGN=TOP><TD NOWRAP><FONT COLOR="#DD0000"><B>Processor&nbsp;mode:</B></FONT></TD><TD COLSPAN=3>Processor is in SVC mode</TD></TR>
<TR VALIGN=TOP><TD COLSPAN=4><BR></TD></TR><TR VALIGN=TOP><TD NOWRAP><FONT COLOR="#DD0000"><B>Re-entrancy:</B></FONT></TD><TD COLSPAN=3>SWI is not re-entrant</TD></TR>
<TR VALIGN=TOP><TD COLSPAN=4><BR></TD></TR><TR VALIGN=TOP><TD NOWRAP><FONT COLOR="#DD0000"><B>Use:</B></FONT></TD><TD COLSPAN=3>
An application that provides services to PC software should call this when it is starting. A message buffer is allocated and a unique handle for this task assigned. This handle should be stored and used in all other calls relating to this task.
<P>
The currently defined flag bits are:
<TABLE BORDER=1 ALIGN=CENTER>
<TR><TH>Bit</TH><TH>Meaning if set</TH></TR>
<TR VALIGN=TOP><TD ALIGN=RIGHT>0</TD><TD>Messages from the <FONT COLOR="#004499"><B><I>ARMEdit</I></B></FONT> module are required.</TD></TR>
</TABLE>
<P>
All other bits should be set to 0 to allow for future expansion.
<P>
The poll word is initially set to zero. When there is potentially a message waiting for this task the poll word is set to a non-zero value. The poll word is cleared when either the message has been read, or no message is available for some other reason. Note that a non-zero poll word does not imply that a message will be available; another task might have read the message if it was not directed to a specific handle. The poll word must not be written to; it must only be modified by the <FONT COLOR="#004499"><B><I>ARMEdit</I></B></FONT> module.
</TD></TR>
<TR VALIGN=TOP><TD COLSPAN=4><BR></TD></TR><TR VALIGN=TOP><TD NOWRAP><FONT COLOR="#DD0000"><B>Related&nbsp;SWIs:</B></FONT></TD><TD COLSPAN=3><TT><A HREF="tend.html" TITLE="ARMEdit_TalkEnd">ARMEdit_TalkEnd</A></TT>, <TT><A HREF="ttx.html" TITLE="ARMEdit_TalkTX">ARMEdit_TalkTX</A></TT>, <TT><A HREF="trx.html" TITLE="ARMEdit_TalkRX">ARMEdit_TalkRX</A></TT>, <TT><A HREF="tack.html" TITLE="ARMEdit_TalkAck">ARMEdit_TalkAck</A></TT>, <TT><A HREF="trply.html" TITLE="ARMEdit_TalkReply">ARMEdit_TalkReply</A></TT></TD></TR>
<TR VALIGN=TOP><TD COLSPAN=4><BR></TD></TR><TR VALIGN=TOP><TD NOWRAP><FONT COLOR="#DD0000"><B>Related&nbsp;vectors:</B></FONT></TD><TD COLSPAN=3>None</TD></TR>
</TABLE>
<HR> <TABLE WIDTH="100%">
<TR VALIGN=TOP>
<TD>
[<A HREF="../index.html" TITLE="Contents">Contents</A>]
[<A HREF="index.html" TITLE="Up">Up</A>]
</TD>
<TD ALIGN=RIGHT>
<FONT SIZE=-1><I> <A HREF="../legal/copy.html" TITLE="Copyright">Copyright</A> &copy; <A HREF="mailto:armedit@thouky.co.uk" TITLE="Send Email to Alexander Thoukydides">Alexander Thoukydides</A>, 2001</I></FONT>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>
